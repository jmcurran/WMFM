% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/makeSafeEvalEnv.R
\name{makeSafeEvalEnv}
\alias{makeSafeEvalEnv}
\title{Create a safe evaluation environment for derived-variable expressions}
\usage{
makeSafeEvalEnv(data)
}
\arguments{
\item{data}{A data frame.}
}
\value{
An environment suitable for \code{eval(rhs, envir = env)}.
}
\description{
Builds an environment that contains the columns of \code{data} and a small
allowlist of safe base functions. This is intended for evaluating the
right-hand side (RHS) of user-entered derived-variable assignments in a
Shiny app without exposing powerful functions like file I/O or system calls.
}
\details{
The returned environment contains:
\itemize{
\item All columns of \code{data} as symbols.
\item A symbol \code{data} bound to the full data frame.
\item Only the allowlisted functions (from \code{base}) in the parent environment.
}
}
\examples{
df = data.frame(x = 1:5)
env = makeSafeEvalEnv(df)
eval(parse(text = "log(x)"), envir = env)
eval(parse(text = "factor(rep(1:2, length.out = nrow(data)))"), envir = env)

}
